@using System.Globalization

@model IEnumerable<EmployeeDto>
@{
    ViewData["Title"] = "Index";
}

<h1>All Employees</h1>
<br />
<br />
<a class="btn btn-primary" asp-controller="Employee" asp-action="Create">Create Employee</a>
<br />
@if (Model.Any())
{
    <div class="m-2">
        <form asp-action="Index" method="get">
            <div class="row justify-content-center">

                <div class="col-8 col-md-6">
                    <input type="text"
                           name="searchValue"
                           class="form-control"
                           placeholder="Search Employee..."
                           value="@Context.Request.Query["searchValue"]" />
                </div>

                <div class="col-4 col-md-2">
                    <button type="submit" class="btn btn-dark w-100">
                        Search
                    </button>
                </div>

            </div>
        </form>
    </div>

    <table class="table table-striped table-hover mt-3">
        <thead class="text-center">
            <tr>
                <th>@Html.DisplayNameFor(e => e.Name)</th>
                <th>@Html.DisplayNameFor(e => e.Email)</th>
                <th>@Html.DisplayNameFor(e => e.EmployeeType)</th>
                <th>@Html.DisplayNameFor(e => e.Age)</th>
                <th>@Html.DisplayNameFor(e => e.Salary)</th>
                <th>@Html.DisplayNameFor(e => e.IsActive)</th>
                <th>@Html.DisplayNameFor(e => e.Gender)</th>
                <th>Details </th>
                <th>Update</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody class="text-center">
            @foreach (var employee in Model)
            {
                <tr>

                    <td>@employee.Name</td>
                    <td>@employee.Email</td>
                    <td>@employee.EmployeeType</td>
                    <td>@employee.Age</td>

                    <!-- Salary style -->
                    <td>
                        <span class="fw-bold @(employee.Salary > 1999 ? "text-success" : "text-warning")">
                            @($"{employee.Salary:N0} EGP")
                        </span>
                    </td>

                    <!-- IsActive style -->
                    <td>
                        @if (employee.IsActive)
                        {
                            <span class="badge bg-success">Active</span>
                        }
                        else
                        {
                            <span class="badge bg-danger">Inactive</span>
                        }
                    </td>

                    <!-- Gender style -->
                    <td>
                        @if (employee.Gender == "Male")
                        {
                            <span class="text-primary">
                                <i class="fas fa-mars"></i> Male
                            </span>
                        }
                        else if (employee.Gender == "Female")
                        {
                            <span class="text-danger">
                                <i class="fas fa-venus"></i> Female
                            </span>
                        }
                        
                    </td>
                    <partial name="_ButtonsPartialView" model="@employee.Id" />

                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-info mt-3">
        <h2>No Employees Found !!</h2>
    </div>
}
